spring.application.name=fraud-detection-service

# Server
server.port=8081

# R2DBC PostgreSQL Configuration
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/fraud_db
spring.r2dbc.username=user_banking
spring.r2dbc.password=password123

# Package on DEBUG to see my own logs
logging.level.com.jchacon.banking.frauddetection=DEBUG

# Updated logging pattern with Correlation ID
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36} [CORR-ID: %X{correlationId}] : %msg%n

# Keep driver noise low
logging.level.org.springframework.data.r2dbc=INFO
logging.level.io.r2dbc.postgresql=INFO

# To capture http error codes correctly
spring.webflux.problemdetails.enabled=true

# -------------------------------------------
# --- R2DBC Connection Pool Configuration ---
# -------------------------------------------
# Initial and maximum number of connections in the pool
spring.r2dbc.pool.initial-size=10
spring.r2dbc.pool.max-size=20

# Max time a connection can be idle before being closed (10 minutes)
spring.r2dbc.pool.max-idle-time=10m

# Max lifetime of a connection in the pool (30 minutes)
spring.r2dbc.pool.max-life-time=30m

# --- Timeout settings (Driver Specific - Postgres example) ---
# How long to wait for a connection from the pool (5 seconds)
spring.r2dbc.properties.connect_timeout=5000

# How long a statement is allowed to run before being canceled (2 seconds)
# This is critical to prevent slow queries from locking resources
spring.r2dbc.properties.options=lock_timeout=2000;statement_timeout=2000
